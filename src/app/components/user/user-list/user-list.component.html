<div class="user-list">
  <!-- Header -->
  <div class="user-list__header">
    <div class="user-list__header-left">
      <h3>{{ title }}</h3>
      <p class="subtitle">
        Administra los usuarios de Mahou: edita sus datos, rol y estado.
      </p>
    </div>

    <div class="user-list__header-right">
      <span class="pill pill-soft">
        <i class="fas fa-users"></i>
        {{ users.length || 0 }} usuarios
      </span>
    </div>
  </div>

  <!-- Lista -->
  <ng-container *ngIf="users && users.length; else emptyState">
    <div class="user-list__table">
      <!-- Encabezados (sin ID) -->
      <div class="user-list__row user-list__row--head">
        <div class="col col-main">Usuario</div>
        <div class="col col-email">Correo</div>
        <div class="col col-role">Rol</div>
        <div class="col col-status">Estado</div>
        <div class="col col-actions">Acciones</div>
      </div>

      <!-- Filas -->
      <div class="user-list__row" *ngFor="let u of users">
        <!-- Usuario (avatar + nombre + username) -->
        <div class="col col-main">
          <div class="user-main">
            <div class="avatar-circle">
              <span>{{ getInitials(u) }}</span>
            </div>
            <div class="user-main__info">
              <span class="name">
                {{ u.name }} {{ u.lastname }}
              </span>
              <span class="username" *ngIf="u.username">
                &#64;{{ u.username }}
              </span>
            </div>
          </div>
        </div>

        <!-- Correo -->
        <div class="col col-email">
          <span class="email">{{ u.email }}</span>
        </div>

        <!-- Rol (texto bonito + chip color) -->
        <div class="col col-role">
          <span class="chip" [ngClass]="getRoleClass(u.role?.name)">
            {{ getRoleLabel(u.role?.name) }}
          </span>
        </div>

        <!-- Estado (Activo/Inactivo) -->
        <div class="col col-status">
          <span
            class="chip"
            [ngClass]="u.status ? 'chip--status-active' : 'chip--status-inactive'"
          >
            {{ u.status ? 'Activo' : 'Inactivo' }}
          </span>
        </div>

        <!-- Acciones -->
        <div class="col col-actions">
          <button
            type="button"
            class="btn-icon"
            title="Editar usuario"
            (click)="onEdit(u)"
          >
            <i class="fas fa-pen"></i>
          </button>

          <button
            type="button"
            class="btn-icon btn-icon--danger"
            title="Eliminar usuario"
            (click)="onDelete(u)"
          >
            <i class="fas fa-trash"></i>
          </button>
        </div>
      </div>
    </div>
  </ng-container>

  <!-- Estado vacío -->
  <ng-template #emptyState>
    <div class="user-list__empty">
      <i class="fas fa-user-slash"></i>
      <h4>No hay usuarios registrados todavía</h4>
      <p>
        Registra el primer usuario usando el formulario de la parte superior.
      </p>
    </div>
  </ng-template>
</div>
