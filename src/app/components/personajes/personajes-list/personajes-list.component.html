<!-- Loading -->
<div *ngIf="loading" class="loading-section">
  <div class="spinner"></div>
  <p>Cargando personajes...</p>
</div>

<!-- Error -->
<div *ngIf="error" class="error-message">
  <i class="fas fa-exclamation-triangle"></i>
  {{ error }}
</div>

<!-- Empty State -->
<div *ngIf="!loading && personajes.length === 0" class="empty-state">
  <div class="empty-icon">
    <i class="fas fa-user-plus"></i>
  </div>
  <h3>No tienes personajes creados</h3>
  <p>Comienza creando personajes con IA</p>
  <button class="create-first-btn" (click)="crear.emit()">
    <i class="fas fa-magic"></i> Crear primer personaje
  </button>
</div>

<!-- GRID -->
<div class="personajes-grid" *ngIf="personajes.length > 0">

  <div class="personaje-card" *ngFor="let p of personajes">
    <div class="personaje-image-container">
      <img class="personaje-image"
           [src]="p.imagenUrl"
           (error)="onImageError($event)">

      <div class="personaje-overlay">
        <button class="overlay-btn edit-btn" (click)="editar.emit(p)">
          <i class="fas fa-edit"></i>
        </button>

        <button class="overlay-btn delete-btn" (click)="eliminar.emit(p.id!)">
          <i class="fas fa-trash"></i>
        </button>
      </div>
    </div>

    <div class="personaje-info">
      <h3 class="personaje-nombre">{{ p.nombre }} {{ p.apellido }}</h3>
      <p class="personaje-descripcion">{{ p.descripcion }}</p>

      <div class="personaje-meta">
        <span class="personaje-fecha">
          <i class="fas fa-calendar"></i>
          {{ p.createdAt | date:'dd/MM/yyyy' }}
        </span>

        <span class="personaje-status" [ngClass]="'status-' + p.estado">
          <i class="fas fa-circle"></i>
          {{ p.estado }}
        </span>
      </div>
    </div>
  </div>

</div>

<!-- Footer badge -->
<div class="gallery-indicator" *ngIf="personajes.length > 0">
  <div class="gallery-circle"></div>
  <span class="gallery-text">Galer√≠a de Personajes</span>
  <p class="gallery-description">Generados con inteligencia artificial</p>
</div>
