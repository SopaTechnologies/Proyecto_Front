<nav class="floating-nav">
  <div class="floating-nav-inner">
    <!-- Submenú flotante encima del pill -->
    <div
      class="nav-submenu-container"
      [class.open]="activeSection !== null"
    >
      <!-- Historias -->
      <div class="nav-submenu" *ngIf="activeSection === 'historias'">
        <span class="nav-submenu-title">Historias</span>

        <a
          *ngFor="let r of historiasRoutes"
          class="submenu-link"
          [routerLink]="['/app', r.path]"
          routerLinkActive="active"
          (click)="activeSection = null"
        >
          {{ r.data?.['name'] || r.path }}
        </a>
      </div>

      <!-- Menú / Opciones -->
      <div class="nav-submenu" *ngIf="activeSection === 'menu'">
        <span class="nav-submenu-title">Menú</span>

        <a
          *ngFor="let r of menuRoutes"
          class="submenu-link"
          [routerLink]="['/app', r.path]"
          routerLinkActive="active"
          (click)="activeSection = null"
        >
          {{ r.data?.['name'] || r.path }}
        </a>

        <!-- Cerrar sesión dentro del menú -->
        <button
          type="button"
          class="submenu-link danger"
          (click)="logout()"
        >
          <i class="fa-solid fa-right-from-bracket"></i>
          <span>Cerrar sesión</span>
        </button>
      </div>

      <!-- Juego -->
      <div class="nav-submenu" *ngIf="activeSection === 'juego'">
        <span class="nav-submenu-title">Juego</span>

        <a
          *ngFor="let r of juegoRoutes"
          class="submenu-link"
          [routerLink]="['/app', r.path]"
          routerLinkActive="active"
          (click)="activeSection = null"
        >
          {{ r.data?.['name'] || r.path }}
        </a>
      </div>
    </div>

    <!-- Barra principal tipo pill -->
    <div class="nav-pill-row">
      <button
        *ngIf="historiasRoutes.length"
        type="button"
        class="nav-pill"
        [class.active]="activeSection === 'historias'"
        (click)="setActiveSection('historias')"
      >
        <i class="fa-solid fa-book-open"></i>
        <span>Historias</span>
      </button>

      <button
        *ngIf="menuRoutes.length"
        type="button"
        class="nav-pill"
        [class.active]="activeSection === 'menu'"
        (click)="setActiveSection('menu')"
      >
        <i class="fa-solid fa-bars"></i>
        <span>Menú</span>
      </button>

      <button
        *ngIf="juegoRoutes.length"
        type="button"
        class="nav-pill"
        [class.active]="activeSection === 'juego'"
        (click)="setActiveSection('juego')"
      >
        <i class="fa-solid fa-gamepad"></i>
        <span>Juego</span>
      </button>
    </div>
  </div>
</nav>
