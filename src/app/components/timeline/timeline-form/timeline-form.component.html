<!-- Modal para crear/editar mensaje -->
<div class="modal-overlay book-modal-overlay show" (click)="onOverlayClick($event)">
  <div class="modal-dialog book-modal-dialog show" (click)="onDialogClick($event)">
    <div class="modal-content book-modal-content">

      <div class="modal-header book-modal-header">
        <div class="book-title-section">
          <i class="fas fa-feather-alt book-icon"></i>
          <h3 class="book-modal-title">
            {{ message ? 'Editar Línea de tiempo' : 'Línea de tiempo' }}
          </h3>
        </div>

        <button type="button" class="book-close-btn" (click)="onClose()">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <form (ngSubmit)="onSubmit()" #messageForm="ngForm" class="book-form">
        <div class="modal-body book-modal-body">

          <div class="book-form-group">
            <label class="book-label">Año <span class="required-mark">*</span></label>
            <input type="text" class="book-input"
                   [(ngModel)]="formData.titulo"
                   name="titulo"
                   required maxlength="255"
                   placeholder="El principio">
          </div>

          <div class="book-form-group">
            <label class="book-label">Título</label>
            <input type="text" class="book-input"
                   [(ngModel)]="formData.subtitulo"
                   name="subtitulo"
                   maxlength="500"
                   placeholder="Subtítulo">
          </div>

          <div class="book-form-group">
            <label class="book-label">Contenido <span class="required-mark">*</span></label>
            <textarea class="book-textarea"
                      [(ngModel)]="formData.textoGrande"
                      name="textoGrande"
                      rows="12"
                      required
                      placeholder="Texto"></textarea>
          </div>

        </div>

        <div class="modal-footer book-modal-footer">
          <button type="button" class="book-btn book-btn-secondary" (click)="onClose()">
            Cancelar
          </button>

          <button type="submit" class="book-btn book-btn-primary"
                  [disabled]="!messageForm.form.valid || creating">
            {{ creating ? 'Guardando...' : (message ? 'Actualizar Capítulo' : 'Guardar') }}
          </button>
        </div>

      </form>

    </div>
  </div>
</div>